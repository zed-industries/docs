# Assistant Panel

The assistant panel provides you with a way of interacting with OpenAI's large language models. The assistant is good for a sorts of tasks, such as generating code, asking questions about existing code, and writing plaintext, such as for emails, documentation. Open the assistant panel by toggling the right dock via the `workspace: toggle right toggle` action in the command palette (`cmd-shift-p`).

*Note: A default binding can be set to toggle the right dock via the settings.*

## Setup

When you first open the panel, Zed will ask you for an [OpenAI API key](https://platform.openai.com/account/api-keys), which is saved to your keychain. It will also use the `OPENAI_API_KEY` environment variable if it's defined. Once your conversation is given a name, we automatically save it to your file system in `~/.config/zed/conversations`.

[image]

If you need to resete your OpenAI API key, focus on the assistant panel and run the command palette action `assistant: reset key`.

## Having a conversation

The assistant editor works mostly like any other editor in Zed: You have access to all of your familiar custom key bindings and can manipulate text with multiple cursors, which allows for frictionless context switching between coding and having conversations with LLMs. The main difference in the assistant editor is message blocks. Message blocks are "containers" for text that belong to the different roles within the conversation.  These roles include:

- `You`
- `Assistant`
- `System`

Begin by selecting a model and starting to type a message in a `You` block.

[image]

As you type, the remaining tokens for a given model is updated. To submit a message, use `cmd-enter` (`assistant: assist`). This may feel different when compared to typical chat applications, where `enter` submits the message, but our goal when designing the assistant was to make it feel as close to a normal editor as possible, so `enter` simply inserts a newline.

[image]

After submitting a message, the assistant's response will be streamed below, in an `Assistant` message block; the stream can be cancelled with `escape`. This is useful when you notice early on that the response is not what you were looking for.

In addition to typing messages directly, you can also insert selected text from the last active editor pane with `cmd->` (`assistant: quote selection`), and Zed will wrap it in a fenced code block if it is code.

If at any point in time, you want to start a new conversation, the `New Nonversation` button at the top-right corner of the assistant panel can be used.

Simple back-and-forth conversations work pretty well with the assistant, but there will likely come a time when you find yourself wanting to change some previous text in the conversation and steer it a different direction.

## Editing a conversation

The assistant was designed to be as flexible as possible, to put control of the conversation into the user's hands. You can freely edit *any* previous text in the conversation, including responses from the assistant. You can also remove message blocks entirely, by putting your cursor at the beginning of a message block and using `delete`. A typical workflow might look like this:

1. Write some text in a `You` block
2. Submit the message with `cmd-enter`
3. Receive an `Assistant` response that is not quite what you were looking for
4. Cancel the response with `escape`
5. Erase all the content of the `Assistant` message block and remove the block entirely
6. Add additional context to your original message
7. Submit the message with `cmd-enter`

Being able to edit previous messages puts control over how tokens are consumed in your hands. You don't need to start up a new conversation to correct a mistake or add additional context and you don't have to waste tokens by submitting follow-up corrections.

- You are free to change the model type at any point in the conversation.
- You can cycle the role of a message block, by clicking on the role, which is useful when you receive a response in an `Assistant` block that you want to edit and send back up as a `You` block.

[image?]

## Saving a converation

After you submit your first message, a name for your conversation is generated by the LLM and the conversation is automatically saved to your file system in `~/.config/zed/conversations`. You can access and load previous messages via the hamburger button in the top-left corner of the assistant panel.

[image]

Most of the aforementioned actions have toolbar-button equivalents that you can use if you're more GUI driven.

[image]




---

## Tricks and tips

Split message
Multicursor
